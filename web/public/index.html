<!doctype html>

<!-- ASSIGN OUR ANGULAR MODULE -->
<html>
<head>
	<!-- META -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Optimize mobile viewport -->

	<title>What People Say by Elva.org</title>

	<!-- SCROLLS -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"><!-- load bootstrap -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css">
        <link href="//fonts.googleapis.com/css?family=Roboto:100,300,400,500,700" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="node_modules/angular-tag-cloud/src/css/ng-tag-cloud.css">
       
        <link rel="stylesheet" href="bower_components/ng-inline-edit/dist/ng-inline-edit.min.css">
        <style>

        body { padding-top:50px; background: #edecec; font-size: 13px; }
        html, body {
            font-size: 13px;
            height: 100%;
            margin: 0px!important;
            min-width: 1020px;
            padding: 0px!important;
            overflow:auto;
        }
        body, table {
            color: #333;
            font-family: 'Roboto',arial,sans-serif;
        }
        .trending-topics {
            color:grey;
        }
        .trending-topics-no-stats a {
            color:grey;
            font-size:0.9em;
        }
        .trending-location {
            font-size:0.9em;
        }
        .trending-topic {
            margin-right: 10px;
        }
        .trending-topics-no-stats {
            margin-top: 20px;
        }
        .topics {
            margin-top: 20px;
        }
        
        .topics.localized {
            margin-top: 0px;
            border-top: 1px solid #C1A6A6;
        }
        .topic {
            border-radius: 2px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.15);
            cursor: pointer;
            float: left;
            height: 60px;
            margin-bottom: 10px;
            margin-right: 10px;
            font-size: 18px;
            background-color: white;
        }
        
        .topic.localized {
            border-radius: 0px;
            margin-right: 1px;
        }
        
        .topic.localized,
        .topic.record {
            height: auto;
            font-size: 14px;
        }
        
        .topic.record {
            float:none;
        }
        
        .topic.blue {
            border-left: 3px solid #3f85f2;
        }
        .topic.yellow {
            border-left: 3px solid #FFC926;
        }
        .topic.red {
            border-left: 3px solid #FF2626;
        }
        .topic.green {
            border-left: 3px solid #3CD01A;
        }
        
        .topic.black {
            border-left: 3px solid #000000;
        }
        
        .topic.color1 {
            border-left: 3px solid #4EABB5;
        }
        
        .topic.color2 {
            border-left: 3px solid #8C4EB5;
        }
        
        .topic.color3 {
            border-left: 3px solid #2C9191;
        }
        
        .topic.color4 {
            border-left: 3px solid #2E7FDB;
        }
        
        .topic.color5 {
            border-left: 3px solid #DB8A2E;
        }
        
        .topic.color6 {
            border-left: 3px solid #912C2C;
        }
        
        .topic.color7 {
            border-left: 3px solid #12E072;
        }
        
        .topic.color10 {
            border-left: 3px solid #961919;
        }
         
        .topic.active,
        .topic-localized:hover,
        .topic:hover {
            box-shadow: 0 1px 2px rgba(0,0,0,0.4);
        }
        .topic.active {
            background: #E6E6E6;
        }
        .topic-content {
            padding: 15px 30px 13px 17px; 
        }
        
        .topic-content.localized {
            padding: 4px 6px; 
        }
        .container {
            margin-top: 40px;
        }
        .clear {
            clear: both;
        }
        .elva-footer {
            margin-top:30px;
        }
        .chart-content {

            height: 300px;
            margin: 20px;
        }
        .chart-container {
            background:white;
            padding-top: 20px;
            padding-bottom: 20px;
            width: 100%;
        }
        .map-localized {
            height: 550px;
        }
        .records-container {
            height: 300px;
            overflow: auto;
            width: 650px; 
        }
        
        .sentiment i {
            font-size: 2em;
        }
        
        .sentiment.word.positive {
            background-color: #16D620;
            
        }
        
        .sentiment.word.negative {
            background-color: #990099;
        }
        
        .sentiment.positive i {
            color: #16D620;
        }

        .sentiment.negative i {
            color: #990099;
        }
        
        .sentiment.neutral i {
            color: #FF9900;
        }
        
        .words span {
            margin-right:3px;
        }
        
        .record-sentiment {
            width:5%;
        }
        
        .record-text {
            width:94%;
        }
        
        .words {
            margin-top:5px;
        }
        
        .records-of-interest {
            margin-right:20px;
        }
        
        .top-keywords {
            width: 450px;
            height: 360px;
        }
        
        .topic-add-btn {
            font-size: 1.3em;
            text-align: center;
            padding: 15px;
        }
        
        .topic-add-btn .content {
            height:30px;
            width:30px;
        }
        
        .ng-inline-edit__text {
            display:none;
        }
        
	</style>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
        
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        
<!--        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
        -->

	<!-- SPELLS -->
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script><!-- load angular -->

        <script src="/bower_components/ngmap/build/scripts/ng-map.min.js"></script>
        <script src="/node_modules/ng-infinite-scroll/build/ng-infinite-scroll.min.js"></script>
	<script src='/node_modules/angular-tag-cloud/src/ng-tag-cloud.js'></script>
        
        <script src="//googlemaps.github.io/js-marker-clusterer/src/markerclusterer.js" type="text/javascript"></script>
        
        <!-- Google Maps API version 3.x -->
	<script type="text/javascript"
	  src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAIxk_awfYuSiA9w3KyVkGgSh1i3eR3N8A">
	</script>
        
        <script src="bower_components/ng-inline-edit/dist/ng-inline-edit.min.js"></script>

        
        <script src="js/chart-marker.js"></script>
        
        <script src="js/controllers/chart.js"></script>
        <script src="js/controllers/localized.js"></script>
	<script src="js/controllers/topic.js"></script>
        <script src="js/controllers/trends.js"></script>
        <script src="js/controllers/record.js"></script>
        <script src="js/controllers/keyword.js"></script>
	<script src="js/services/topics.js"></script>
        <script src="js/services/trends.js"></script>
        <script src="js/services/chart.js"></script> 
        <script src="js/services/localized.js"></script> 
        <script src="js/services/record.js"></script> 
        <script src="js/services/keyword.js"></script> 
	<script src="js/core.js"></script> <!-- load our main application -->
        
</head>

<body>
	<div class="container">

            <!-- SET THE CONTROLLER -->
            <div class="trending-topics" ng-controller="trendsController">
                <div class="trending-location">
                    <span class="fa fa-line-chart trending-icon"></span> <span>Trending in Ukraine</span> <span ng-show="loading" class="fa fa-circle-o-notch fa-spin "></span>
                </div>
                <div>
                    <!-- LOOP OVER THE TRENDS IN $scope.trends WHERE STATS AVAILABLE -->
                    <a class="trending-topic" href="#" ng-repeat="trend in trends">{{ trend.name }} <span class="badge" ng-show="trend.tweet_volume != null">{{ trend.tweet_volume }}</span></a>  
                </div>

            </div>
            
            <!-- SET THE CONTROLLER -->
            <div class="topics" ng-controller="topicController">
                <div ng-repeat="topic in topics" class="topic" style="border-left: 3px solid {{ topic.color }}">
                    <div class="topic-content">
                        {{ topic.name }}
                    </div>
                    
                </div>
                <div class="topic">
                    <div class="topic-content topic-add-btn">
                        
                        <div id="topic-editor" class="editor"
                            inline-edit="topicName"
                            inline-edit-callback="createTopic(newValue)"
                            inline-edit-placeholder="Enter topic"
                            inline-edit-btn-edit="+"
                            inline-edit-on-blur="save"
                            inline-edit-on-click="false"></div>
                    </div>
                    
                </div>
                <div class="clear"></div>
            </div>
            
            <h3>Interest over time</h3>
            <div ng-controller="chartController" class="chart-container">
                <div id="time-chart" class="chart-content"></div>
            </div>
                
            <h3>Localized interest</h3>
            <div class="map-localized" ng-controller="localizedController">
                <ng-map 
                    zoom="6" center="[48.379433,31.165579999999977]"
                    style="height: 550px"
                    default-style="false">
                </ng-map>
            </div>
            <div class="topics localized" ng-controller="topicController">
                <div ng-repeat="topic in topics" class="topic localized {{topic.name == activeTopicName ? 'active' : '' }}" style="border-bottom: 3px solid {{ topic.color }}">
                    <div class="topic-content localized" ng-click="loadLocalized(topic.name)">
                        {{ topic.name }}
                    </div>
                    
                </div>
                <div class="clear"></div>
            </div>
            
            <div class="clearfix">
                <div class="pull-left records-of-interest">
                    <h3>Records of interest</h3>

                    <div id="records-container" class="records-container" ng-controller="recordController">
                      <div infinite-scroll="loadRecords(topic.name)" 
                           infinite-scroll-immediate-check="false"
                              infinite-scroll-container="'#records-container'" 
                              infinite-scroll-parent>
                        <div class="panel panel-default topic record {{ topic.colorName }}" ng-repeat="record in records">
                            <div class="panel-body">
                                <div class="clearfix">
                                    <div class="pull-left record-sentiment">
                                        <span class="sentiment positive" ng-show="record.sentiment.score > 0">
                                            <i class="fa fa-thumbs-up" aria-hidden="true"></i>
                                        </span>
                                        <span class="sentiment negative" ng-show="record.sentiment.score < 0">
                                            <i class="fa fa-thumbs-down" aria-hidden="true"></i>
                                        </span>
                                        <span class="sentiment neutral" ng-show="record.sentiment.score == 0">
                                            <i class="fa fa-hand-peace-o" aria-hidden="true"></i>
                                        </span>
                                    </div>
                                    <div class="pull-left record-text">
                                        <span>{{record.text}}</span>
                                    </div>
                                </div>
                                <div class="words">
                                    <span class="label label-default sentiment word">{{record.sentiment.score | number : 2}}</span>
                                    <span ng-repeat="word in record.sentiment.positive track by $index" class="label label-default sentiment word positive">{{word}}</span>
                                    <span ng-repeat="word in record.sentiment.negative track by $index" class="label label-default sentiment word negative">{{word}}</span>
                                </div>

                                </div>

                            </div>

                        </div>
                        <div class="panel panel-default topic record" ng-show='busy'>
                            <div class="panel-body">
                                Loading records...
                            </div>
                        </div>
                    </div>        
                </div>
                <div class="pull-left top-keywords">
                    <h3>Top keywords</h3>
                    <div class="panel panel-default" ng-controller="keywordController">
                        <div class="panel-body">
                            <ng-tag-cloud cloud-width="400" cloud-height="270" cloud-data="keywords" cloud-shape="rectangular"></ng-tag-cloud>
                        </div>
                    </div>   
                </div>
            </div>
            

            

            
            <div class="text-center text-muted elva-footer">
                    <p>by <a href="http://elva.org">Elva.org</a>.</p>
            </div>

	</div>
    


</body>
</html>

